<!-- <a href="https://icons8.com/icon/dj1fRgpBOEt4/healthy-food-calories-calculator">Healthy Food Calories Calculator icon by Icons8</a> -->

<!DOCTYPE html>
<html lang="en">
<style>
  #modal {
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: 100;
    background-color: rgba(187, 187, 187, 0.575);
  }

  #modal details-dialog {
    width: 70%;
    margin-top: 50px;
    margin-left: 15%;
  }
</style>
<%- include('head', {title: "Update Food" }); -%>

  <body>
    <div id="app">
      <div v-if="modalOpen" id="modal" class="details-reset details-overlay details-overlay-dark">
        <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast">
          <div class="Box-header">
            <button @click="modalOpen = !modalOpen" class="Box-btn-octicon btn-octicon float-right" type="button"
              aria-label="Close dialog" data-close-dialog>
              <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                  d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z">
                </path>
              </svg>
            </button>
            <h3 class="Box-title">Are you sure?</h3>
          </div>
          <div class="overflow-auto">
            <div class="Box-body overflow-auto">
              <p>
                This is an irreversible operation and will delete all the data related to this food
                item.
              </p>
            </div>

          </div>
          <div class="Box-footer">
            <a type="button" href="/delete/<%= food.name %>" class="btn btn-danger">Yes, Delete</a>
            <button class="ml-2 btn btn-outline" @click="modalOpen = false">No, Cancel</button>
          </div>
        </details-dialog>
      </div>

      <%- include('header'); -%>
        <div class="Subhead m-5">
          <div class="Subhead-heading">Update "<%= food.name %>"</div>
          <div class="Subhead-description">Modify the required fields and save</div>
        </div>

        <button @click="openModal" class="mx-5 btn btn-danger">Delete</button>

        <form class="px-5" action="/update/<%= food.name %>" method="POST">
          <div class="form-group">
            <div class="form-group-header">
              <label for="food_name">Food name</label>
            </div>
            <div class="form-group-body">
              <input class="form-control" name="food_name" type="text" value="<%= food.name %>" id="food_name"
                placeholder="e.g. flour, bread, ..." />
            </div>
          </div>

          <div class="form-group">
            <div class="form-group-header">
              <label for="typical_value">Typical Values Per</label>
            </div>
            <div class="form-group-body">
              <input class="form-control" value="<%= food.typical_values_per %>" step="0.01" name="typical_value"
                type="number" id="typical_value" placeholder="e.g. 100, 200, ..." />
            </div>
          </div>

          <div class="form-group">
            <div class="form-group-header">
              <label for="typical_value_unit">Unit of the above typical value</label>
            </div>
            <div class="form-group-body">
              <input class="form-control" value="<%= food.unit_of_tvp %>" name="typical_value_unit" type="text"
                id="typical_value_unit" placeholder="e.g. gram, milligram,..." />
            </div>
          </div>

          <div class="form-group-header">
            <label for="calories">Calories</label>
          </div>
          <div class="form-group-body">
            <input class="form-control" value="<%= food.calories %>" step="0.01" name="calories" type="number"
              id="calories" />
          </div>

          <div class="form-group-header">
            <label for="carbs">Carbs</label>
          </div>
          <div class="form-group-body">
            <input class="form-control" value="<%= food.carbs %>" step="0.01" name="carbs" type="number" id="carbs" />
          </div>

          <div class="form-group-header">
            <label for="fats">Fats</label>
          </div>
          <div class="form-group-body">
            <input class="form-control" value="<%= food.fats %>" step="0.01" name="fats" type="number" id="fats" />
          </div>

          <div class="form-group-header">
            <label for="proteins">Protein</label>
          </div>
          <div class="form-group-body">
            <input class="form-control" value="<%= food.proteins %>" step="0.01" name="proteins" type="number"
              id="proteins" />
          </div>

          <div class="form-group-header">
            <label for="salt">Salt</label>
          </div>
          <div class="form-group-body">
            <input class="form-control" value="<%= food.salt %>" step="0.01" name="salt" type="number" id="salt" />
          </div>

          <div class="form-group-header">
            <label for="sugar">Sugar</label>
          </div>
          <div class="form-group-body">
            <input class="form-control" value="<%= food.sugar %>" step="0.01" name="sugar" type="number" id="sugar" />
          </div>

          <div class="form-group">
            <button type="submit" class="btn btn-primary">Update</button>
            <a type="button" href="/foods" class="btn">Cancel</a>
          </div>
    </div>
    </div>
    </div>
    </form>
    </div>
  </body>
  <!-- VueJS 3 JavaScript Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.0.2/vue.global.prod.js"
    integrity="sha512-M8VjsuCj1iBzrwKloFNjvQBmFXT2oF0MWExoLGpQT2nEx5tq7CP+BhWGJdczT1LoWAhyqHh+LJ6ihHSVGyclHw=="
    crossorigin="anonymous"></script>

  <script>
    const app = Vue.createApp({
      data() {
        return {
          modalOpen: false
        }
      },
      methods:  {
        openModal() {
          this.modalOpen = true;
        }
      }
    }
    );
    const mountedApp = app.mount('#app');
  </script>

</html>